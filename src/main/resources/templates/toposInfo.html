<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head th:insert="fragments/head.html">
	<meta charset="UTF-8"/>
	<title>Info topos</title>
</head>
<body>
	<header th:insert="fragments/header.html"></header>
	<div align="center">
		<h1><b>Detail Topos :</b></h1>
		<br/>
		<div class="container card">
				<table class="table table-dark">
					<thead>
						<tr>
							<th scope="col">Nom</th>
							<th scope="col">Lieu</th>
							<th scope="col">Description</th>
							<th scope="col">Date</th>
							<th scope="col">Utilisateur</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="topo : ${topos}">
					        <td th:text="${topo.name}">...</td>
					        <td th:text="${topo.place}">...</td>
					        <td th:text="${topo.description}">...</td>
					        <td th:text="${topo.date}">...</td>
					        <td th:text="${topo.user.username}">...</td>
					    </tr>
				    </tbody>
				</table>
				<br/>
				<a class="btn btn-outline-secondary" th:href="@{/toposAll}">Retour</a>
				<br/>
	  		</div>	
		</div>
		<div class="container card">
		<form th:action="@{/toposInfo(idTopos = ${topos.id})}" th:objet="${comments}" method="post" id="formComment">
			<textarea th:name="comment" placeholder="Votre commentaire" class="form-control" form="formComment"></textarea>
			<br/>
			<input type="submit" value="Envoyer"  class="btn btn-outline-secondary" id="link"/>
			<br/>
		</form>
		<br/>
		<table class="table table-dark" th:each="comment : ${comments}">
			<tr>
				<td th:text="${comment?.user?.username}">...</td>
		        <td th:text="${comment?.release_date}">...</td>
		        <td th:text="${comment?.comment}">...</td>
		        <td sec:authorize="hasRole('ROLE_ADMIN')">
					<form th:action="@{/modifComment}" method="get">
						<input type="hidden" th:name="idComment" th:value="${comment.id}" class="form-control"/>
						<input type="submit" value="Modifier" class="btn btn-outline-secondary" id="link"/>
					</form>
				</td>
		        <td sec:authorize="hasRole('ROLE_ADMIN')">
		        	<form th:action="@{/deleteComment}" method="post">
						<input type="hidden" th:name="idComment" th:value="${comment.id}" class="form-control"/>
						<input type="hidden" th:name="idTopos" th:value="${topos.id}"  class="form-control"/>
						<input type="submit" value="Supprimer" class="btn btn-outline-secondary" id="link"/>
					</form>
		        </td>
			</tr>
		</table>
		<br/>
  		</div>	
	<div th:insert="fragments/footer.html"></div>
</body>
</html>